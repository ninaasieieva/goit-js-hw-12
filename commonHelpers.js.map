{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(query, page = 1, perPage = 12) {\n    const searchParams = new URLSearchParams({\n        key: '44785846-fbfadd775113e3685d7630ccf',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: false,\n        per_page: perPage,\n        page: page,\n    });\n    const url = `https://pixabay.com/api/?${searchParams}`;\n    \n    return await axios.get(url)\n        .then((response) => {\n            console.log(response);\n            return {\n                images: response.data.hits,\n                totalImages: response.data.totalHits \n            }\n        })\n        .catch((error) => console.log(error));\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function clearGallery() {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n}\n\nlet lightBox;\nexport function displayImages(images) {\n    const gallery = document.getElementById('gallery');\n    gallery.insertAdjacentHTML('beforeend', images\n        .map(image => `\n        <div class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <div class=\"info\">\n                <p><strong>Likes:</strong><br>${image.likes}</p>\n                <p><strong>Views:</strong><br>${image.views}</p>\n                <p><strong>Comments:</strong><br>${image.comments}</p>\n                <p><strong>Downloads:</strong><br>${image.downloads}</p>\n            </div>\n        </div>`).join('')\n    );\n    if (lightBox) {\n        lightBox.refresh();\n    } else {\n        lightBox = new SimpleLightbox('.gallery a',{\n          captions: true,\n          captionType: 'attr',\n          captionsData: 'alt',\n          captionPosition: 'bottom',\n          captionDelay: 250,\n        });\n    }    \n}\n\nexport function showLoading() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'inline-block';\n}\n\nexport function hideLoading() {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'none';\n}\n\nexport function notFoundMessage() {\n  iziToast.warning({\n    title: 'Not found',\n    message: 'Sorry, there are no images matching search query. Please try again!',\n    position: 'topRight',\n  });\n}\n\nexport function endOfListMessage() {\n  iziToast.info({\n    title: 'End of List',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n\nexport function errorMessage(error) {\n  iziToast.error({\n    title: 'Error',\n    message: error.message,\n    position: 'topRight',\n  });\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  loadMoreButton.style.display = 'inline-block';\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  loadMoreButton.style.display = 'none';\n}\n\nexport function scrollDown() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (!galleryItem) {\n    return;\n  }\n  const pxToScroll = galleryItem.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: pxToScroll,\n    behavior: 'smooth'\n  });\n}","import {\n  fetchImages\n} from './js/pixabay-api';\nimport {\n  clearGallery,\n  displayImages,\n  showLoading,\n  hideLoading,\n  notFoundMessage,\n  endOfListMessage,\n  errorMessage,\n  showLoadMoreButton, \n  hideLoadMoreButton,\n  scrollDown\n} from './js/render-functions.js';\n\nlet query = \"sert\";\nlet currentPage = 1;\nconst perPage = 15;\n\ndocument.getElementById('searchButton').addEventListener('click', async () => {\n  currentPage = 1;\n  query = document.getElementById('searchInput').value.trim();\n  if (query === '') {\n    return;\n  }\n  clearGallery();\n  try {\n    showLoading();\n    const { images, totalImages } = await fetchImages(query, currentPage, perPage);\n    if (images.length === 0) {\n      notFoundMessage();\n    } else {\n      displayImages(images);\n      showLoadMoreButton()\n    }\n    \n    if (currentPage * perPage >= totalImages) {\n      hideLoadMoreButton();\n      endOfListMessage();\n    }\n    \n  } catch (error) {  \n    errorMessage(error);\n  } finally {\n    hideLoading();\n  }\n});\n\ndocument.getElementById('loadMoreButton').addEventListener('click', async () => {\n  currentPage++;\n  try {\n    showLoading();\n    const { images, totalImages } = await fetchImages(query, currentPage, perPage);\n    if (images.length === 0) {\n      showNoResultsMessage();\n    } else {\n      displayImages(images);\n      scrollDown();\n      if (currentPage * perPage >= totalImages) {\n        hideLoadMoreButton();\n        endOfListMessage();\n      }\n    }\n  } catch (error) {\n    errorMessage(error);\n  } finally {\n    hideLoading();\n  }\n});"],"names":["fetchImages","query","page","perPage","url","axios","response","error","clearGallery","gallery","lightBox","displayImages","images","image","SimpleLightbox","showLoading","loader","hideLoading","notFoundMessage","iziToast","endOfListMessage","errorMessage","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","scrollDown","galleryItem","pxToScroll","currentPage","totalImages"],"mappings":"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"}